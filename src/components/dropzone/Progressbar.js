import React, { useEffect, useState, useRef } from "react";
import "./ProgressBar.css";
// import cloudDownloadSuccess from "../../resources/cloud_download_color@6d.svg";
import '../../themes/base-theme.css'

const ProgressBar = (props) => {
    const [offset, setOffset] = useState(0);
    const circleRef = useRef(null);
    const { size, progress, strokeWidth, circleOneStroke, circleTwoStroke } = props;

    const center = size / 2;
    const radius = size / 2 - strokeWidth / 2;
    const circumference = 2 * Math.PI * radius;

    useEffect(() => {
        const progressOffset = ((100 - progress) / 100) * circumference;
        setOffset(progressOffset);
        circleRef.current.style = "transition: stroke-dashoffset 850ms ease-in-out;";
    }, [setOffset, circumference, progress, offset]);

    return (
        <>
            <svg className="svg" width={size} height={size}>
                <circle className="svg-circle-bg" ref={circleRef} stroke={circleOneStroke} cx={center} cy={center} r={radius} />
                <circle
                    transform={`rotate(-90, ${center},${center})`}
                    className="svg-circle"
                    ref={circleRef}
                    stroke={circleTwoStroke}
                    cx={center}
                    cy={center}
                    r={radius}
                    strokeWidth={strokeWidth}
                    strokeDasharray={circumference}
                    strokeDashoffset={offset}
                />
            </svg>
            <div
                style={{ marginTop: "-120px", cursor: "pointer" }}
                onClick={() => {
                    props.OnCancel && props.OnCancel();
                }}
            >
                <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1">
                    <title>7D8868E5-13EB-4E4B-B1C4-AD87EDC05574@6d</title>
                    <g id="File_Download_Notification_Okay" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="File_Download_Notification_08" transform="translate(-1063.000000, -220.000000)" fill="#FF3E55">
                            <path
                                d="M1073,220 C1074.38022,220 1075.67903,220.260414 1076.89648,220.78125 C1078.11394,221.302086 1079.17513,222.014969 1080.08008,222.919922 C1080.98503,223.824874 1081.69791,224.886062 1082.21875,226.103516 C1082.73959,227.32097 1083,228.619785 1083,230 C1083,231.380215 1082.73959,232.67903 1082.21875,233.896484 C1081.69791,235.113938 1080.98503,236.175126 1080.08008,237.080078 C1079.17513,237.985031 1078.11394,238.697914 1076.89648,239.21875 C1075.67903,239.739586 1074.38022,240 1073,240 C1071.61978,240 1070.32097,239.739586 1069.10352,239.21875 C1067.88606,238.697914 1066.82487,237.985031 1065.91992,237.080078 C1065.01497,236.175126 1064.30209,235.113938 1063.78125,233.896484 C1063.26041,232.67903 1063,231.380215 1063,230 C1063,228.619785 1063.26041,227.32097 1063.78125,226.103516 C1064.30209,224.886062 1065.01497,223.824874 1065.91992,222.919922 C1066.82487,222.014969 1067.88606,221.302086 1069.10352,220.78125 C1070.32097,220.260414 1071.61978,220 1073,220 Z M1073,238.769531 C1074.21094,238.769531 1075.347,238.538414 1076.4082,238.076172 C1077.46941,237.61393 1078.39388,236.985681 1079.18164,236.191406 C1079.9694,235.397131 1080.5944,234.469406 1081.05664,233.408203 C1081.51888,232.347 1081.75,231.210944 1081.75,230 C1081.75,228.789056 1081.51888,227.653 1081.05664,226.591797 C1080.5944,225.530594 1079.9694,224.606124 1079.18164,223.818359 C1078.39388,223.030595 1077.46941,222.405601 1076.4082,221.943359 C1075.347,221.481117 1074.21094,221.25 1073,221.25 C1071.78906,221.25 1070.653,221.481117 1069.5918,221.943359 C1068.53059,222.405601 1067.60612,223.030595 1066.81836,223.818359 C1066.0306,224.606124 1065.4056,225.530594 1064.94336,226.591797 C1064.48112,227.653 1064.25,228.789056 1064.25,230 C1064.25,231.210944 1064.48112,232.347 1064.94336,233.408203 C1065.4056,234.469406 1066.0306,235.397131 1066.81836,236.191406 C1067.60612,236.985681 1068.53059,237.61393 1069.5918,238.076172 C1070.653,238.538414 1071.78906,238.769531 1073,238.769531 Z M1076.53516,226.464844 C1076.65234,226.582032 1076.71094,226.728515 1076.71094,226.904297 C1076.71094,227.080079 1076.65234,227.226562 1076.53516,227.34375 L1073.87891,230 L1076.53516,232.65625 C1076.65234,232.773438 1076.71094,232.919921 1076.71094,233.095703 C1076.71094,233.271485 1076.65234,233.417968 1076.53516,233.535156 C1076.41797,233.652344 1076.27149,233.710938 1076.0957,233.710938 C1075.91992,233.710938 1075.77344,233.652344 1075.65625,233.535156 L1073,230.878906 L1070.34375,233.535156 C1070.22656,233.652344 1070.08008,233.710938 1069.9043,233.710938 C1069.72851,233.710938 1069.58203,233.652344 1069.46484,233.535156 C1069.34766,233.417968 1069.28906,233.271485 1069.28906,233.095703 C1069.28906,232.919921 1069.34766,232.773438 1069.46484,232.65625 L1072.12109,230 L1069.46484,227.34375 C1069.34766,227.226562 1069.28906,227.080079 1069.28906,226.904297 C1069.28906,226.728515 1069.34766,226.582032 1069.46484,226.464844 C1069.58203,226.347656 1069.72851,226.289062 1069.9043,226.289062 C1070.08008,226.289062 1070.22656,226.347656 1070.34375,226.464844 L1073,229.121094 L1075.65625,226.464844 C1075.77344,226.347656 1075.91992,226.289062 1076.0957,226.289062 C1076.27149,226.289062 1076.41797,226.347656 1076.53516,226.464844 Z"
                                id="close---simple-line-icons"
                            ></path>
                        </g>
                    </g>
                </svg>
            </div>
        </>
    );
};

export default ProgressBar;
